---
layout: post
title: "모의해킹 취업반 스터디 7기 2주차"
date: 2024-10-23
excerpt: "끄아악"
tags: [Post, TIL, Web]
comments: true
---

http/1.1이랑 http/2랑 호환 X?
css를 이용해서 하는 공격이 있다고?
내부 ip / 외부 ip
bootstrap이란?
우선순위: html > php
<?php
    if($_GET['login_id'] == "") {
        header("location: login.php");
        exit;
    }
?>
php header 코드 확인하기
응답헤더 login.php로 리다이렉트
3XX 코드
exit를 해야 코드가 노출 되지 않는다

302found
redirect는 되지만 html 코드가 다 보임
노출되면?
burp suite란?

action="" -> 자기 자신에게 데이터 보냄
if(isset($_POST['Submit'])) {
    $login_res = login1($_POST['UserId'], $_POST['Password']);
    echo "this > " . $login_res;
}

submit 말고 뭐가 더 있는 지
무슨 역할인지

외부 php import 하기
<?php
require_once('login_func.php');
?>

require_twice도 있나? ㅋㅋ
function login1($userid, $userpass) {
    $crew_id = "admin";
    $crew_ps = "admin1234";

    if ($userid == $crew_id and $userpass == $crew_ps) {
        return $userid;
    }
    else return 0;
}

nbsp?

에러 발견했을 때?
php code가 죽었을 때 그냥 죽어버리던데
1. 에러 출력: php error 출력
2. echo로 확인하기

NAT 네트워크는 호스트와 VM이 같은 IP대역대를 갖게 되면 NAT 네트워크가 충돌하거나, 호스트 시스템이 네트워크 트래픽을 제대로 라우팅하지 못할 가능성이 큽니다. 네트워크 장치가 동일한 IP 대역에서 어떤 장치로 데이터를 보내야할지 명확히 구분하기 힘들기 때문입니다.

테스트 하신 것과 같이 IP 대역대가 동일하다면 사실상 그건 브릿지와 개념상 다를 바가 없습니다. 대역대를 같이 쓰려면 브릿지를 써야합니다. NAT을 쓰려면 대역대를 다르게 써야합니다.

NAT 설정의 예를 들어 호스트 IP가 192.168.0.10이라면 subnet ip를 192.168.10.0으로 바꾸시면 원하시는 NAT에서의 외부 접속이 가능합니다.
포트포워딩

database: 데이터를 저장한다
was <-> db

db ≓ 엑셀
database -> excel file
table -> excel sheet
column: 열, 데이터 종류, 카테고리, 세로
row: 행, 가로 데이터

http://192.168.219.197:1018/phpmyadmin/
admin
student1234
utf8_generalci
variable character =/=? text
auto increament
primary

query

SQL
was가 db한테 명령을 알아서 하도록
sql말고도 없을까?
select: 데이터를 가져온다
select [col] from [table]
e.g. select id from test
select [col1, col2] from [table]
select [*] from [table]

insert: 데이터를 넣는다
insert into [table] (col) value (value)
e.g. insert into test (id) ('hong')
insert into [table] (col) value (value)
e.g. insert into test (id, int) ('hong', 7)
e.g. insert into test value (NULL, '')

where: 조건에 맞는 데이터를 가져온다
select [col] from [table] where [조건]
e.g. select name from test where name='hong'
e.g. select name,pass from test where name='hong' and pass='1234'
e.g. select name,pass from test where name='hong' or pass='1234'

php에서 sql 문구를 어떻게 작성하느냐?
was-db 연결 = php와 mysql 연동시키기
<?php
    define('DB_SERVER', 'localhost(ip)');
    define('DB_USERNAME', 'admin');
    define('DB_PASSWORD', 'student1234');
    define('DB_NAME', 'test');

    $db_conn = mysqli_connect(DB_SERVER, DB_USERNAME, DB_PASSWORD, DB_NAME);

    if ($db_conn) {
        echo "DB Connect OK";
    } else {
        echo "DB Connect Fail";
    }

    $sql = "select * from test";
    $result = mysqli_query($db_conn, $sql);
    
    echo $result;
    var_dump($result);

    $row1 = mysqli_fetch_array($result); // 무조건 순서대로 한 줄씩 가져온다 readline 같은 느낌으로
    $row2 = mysqli_fetch_array($result);
    $row3 = mysqli_fetch_array($result);

    echo "Name: " . $row1['name']; // string1 . string2 => string1string2
    // 약간 python dictionary 같은 느낌

    if($_POST['userpass'] == $db_pass) {
        login OK
    }
?>

was에 db의 id와 pw가 무조건 들어있다
web shell을 까면 db 추측을 먼저 해야 한다
hash로 못 숨기나?
php 함수일 때는 $ 안 붙이고 모든 변수 앞에서는 $ 붙이는 듯
선언을 했든 안 했든
디스크립토
descrypto
echo는 함수가 아닌가? 함수에는 ()로 둘러싸여 있는거 같은데??
너무 자주 쓰여서 예외 처리 해놓은 걸수도

과제
1. 복습
2. get 방식으로 학생의 이름을 넣으면 그 학생의 점수가 출력되는 페이지 만들기
doldol 학생의 점수는 80입니다
3. 회원가입 페이지 만들기 (기능 구현)
4. 로그인 페이지 (db 연동)
5. 가입한 나의 정보를 보는 "마이페이지" 개발